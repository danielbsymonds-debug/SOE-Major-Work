{% extends "base.html" %}
{% block content %}

<style>
  .dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
  }

  .dashboard-title {
    font-size: 2rem;
    font-weight: 500;
    color: #0dccff;
  }

  .welcome-text {
    font-size: 0.95rem;
    color: #b0bcc4;
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2.5rem;
  }

  .stat-card {
    background: #232f3a;
    border: 1px solid #2d3f4d;
    border-radius: 4px;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .stat-value {
    font-size: 2.5rem;
    font-weight: 700;
    color: #0dccff;
  }

  .stat-label {
    font-size: 0.85rem;
    color: #b0bcc4;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .dashboard-section {
    margin-bottom: 2.5rem;
  }

  .section-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: #e0e0e0;
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid #2d3f4d;
  }

  .events-list,
  .resources-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .event-card,
  .resource-card {
    background: #232f3a;
    border-left: 3px solid #0dccff;
    border-radius: 4px;
    padding: 1rem;
    transition: all 0.2s;
  }

  .event-card:hover,
  .resource-card:hover {
    background: #2a3849;
    border-left-color: #0ab8db;
  }

  .event-title,
  .resource-title {
    font-weight: 600;
    color: #e0e0e0;
    margin-bottom: 0.25rem;
  }

  .event-details,
  .resource-details {
    font-size: 0.85rem;
    color: #b0bcc4;
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .event-time {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
  }

  .event-location {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
  }

  .empty-state {
    background: #232f3a;
    border: 1px solid #2d3f4d;
    border-radius: 4px;
    padding: 2rem;
    text-align: center;
    color: #b0bcc4;
  }

  @media (max-width: 768px) {
    .stats-grid {
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
    }

    .dashboard-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 1rem;
    }
  }
</style>

<div class="dashboard-header">
  <div>
    <h2 class="dashboard-title">Dashboard</h2>
    <p class="welcome-text">Welcome back, <strong>{{ current_user.username }}</strong>!</p>
  </div>
</div>

<!-- Stats Overview -->
<div class="stats-grid">
  <div class="stat-card">
    <div class="stat-value">{{ events|length }}</div>
    <div class="stat-label">Total Events</div>
  </div>
  <div class="stat-card">
    <div class="stat-value">{{ resources|length }}</div>
    <div class="stat-label">Resources</div>
  </div>
  <div class="stat-card">
    <div class="stat-value">{{ employees|length }}</div>
    <div class="stat-label">Team Members</div>
  </div>
</div>

<!-- Upcoming Events Section -->
<div class="dashboard-section">
  <h3 class="section-title">Upcoming Events</h3>
  {% if events %}
    <div class="events-list">
      {% for e in events[:5] %}
        <div class="event-card">
          <div class="event-title">{{ e.title }}</div>
          <div class="event-details">
            <span class="event-location">üìç {{ e.location }}</span>
            <span class="event-time">‚è∞ {{ e.start_time }} ‚Üí {{ e.end_time }}</span>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="empty-state">
      <p>No events scheduled. <a href="{{ url_for('events') }}" style="color: #0dccff;">Create</a></p>
    </div>
  {% endif %}
</div>

<!-- Resources Section -->
<div class="dashboard-section">
  <h3 class="section-title">Resources Overview</h3>
  {% if resources %}
    <div class="resources-list">
      {% for r in resources[:5] %}
        <div class="resource-card">
          <div class="resource-title">{{ r.item_code }} - {{ r.description }}</div>
          <div class="resource-details">
            <span>Category: <strong>{{ r.category }}</strong></span>
            <span>Type: <strong>{{ r.type }}</strong></span>
            <span>Qty: <strong>{{ r.quantity }}</strong></span>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="empty-state">
      <p>No resources added yet. <a href="{{ url_for('resources') }}" style="color: #0dccff;">Add one</a></p>
    </div>
  {% endif %}
</div>

{% endblock %}